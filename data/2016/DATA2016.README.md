Jakarta 2015/2016 Monsoon Season
================================
December 2015 to June 2016

### Key Flood Events
1. 2016-02-25 -> 2016-02-28
  * 2016-02-25
  * 2016-02-26
  * 2016-02-27
  * 2016-02-28
* 2016-04-02
* 2016-04-21

See 9 below for REM outputs of key events.

## Risk Evaluation Matrix (Flood Affected Areas)

### Coverage
***2016-01-04 to 2016-07-25***

#### 1. Days of activity:
* 84

```sql
SELECT count(id), date_trunc('day', changed) FROM rem_status_log GROUP BY (date_trunc('day', changed)) ORDER BY date_trunc('day', changed);
```
#### 2. Updates:
* DIMS: 19,523
* BPBD: 2,285 (operators)
* Total: 21,808

```sql
SELECT count(id), username FROM rem_status_log GROUP BY (username);
```
#### 3. Last update by DIMS (discontinued)
* 2016-02-12 17:15:06

```sql
SELECT max(changed) FROM rem_status_log WHERE username = 'DIMS';
```

#### 4. Number of flood events (coarse) as classified by BPBD operators
* 1,268
* Not including DIMS

```sql
SELECT count(id) FROM rem_status_log WHERE username != 'DIMS' AND state > 0;
```

#### 5. Areas (RW districts) affected
* Total number: 534

```sql
SELECT count(id), rw FROM rem_status_log WHERE username != 'DIMS' AND state > 0 GROUP BY rw ORDER BY count(id) DESC;
```

* 325 RWs flooded only once
* 1 RW flooded 28 times

###### 6. Table showing flooding frequency by number of RWs affected

Number of flood events | Number of RWs with this frequency of event
-|-
1|325
2|99
3|36
4|17
5|15
6|11
7|4
8|5
9|2
10|1
11|2
12|1
13|2
14|2
15|2
16|1
17|2
18|1
19|1
23|1
25|2
26|1
28|1


```sql
SELECT a.num_floods as num_floods_over_season, count(a.num_floods) num_areas_affected
FROM (
  SELECT count(id) as num_floods, rw
  FROM rem_status_log
  WHERE username != 'DIMS' AND state > 0 GROUP BY rw ORDER BY count(id) DESC)
  as a
GROUP BY a.num_floods
ORDER BY a.num_floods;
```

* Total area flooded
  * 187,497,781.37 m<sup>2</sup>  
  * 187.497 km<sup>2</sup>
  * UTM 48s / WGS84 projection (EPSG 32748)

```sql
SELECT sum(a.st_area) FROM (
SELECT count(a.id), a.rw, ST_Area(ST_Transform(b.the_geom, 32748)) FROM rem_status_log a, jkt_rw_boundary b WHERE a.username != 'DIMS' AND a.state > 0 AND a.rw = b.pkey GROUP BY (a.rw, ST_Area(ST_Transform(b.the_geom, 32748))) ORDER BY count(id) DESC) a
```

#### 7. Flood heights
BPBD flood height classifications

| State | Water Depth (cm) |
| ----- | ---------------- |
| 0     | None             |
| 1     | Unknown (use caution) |
| 2     | 10 - 70          |
| 3     | 71 - 150         |
| 4     | > 150            |

Distribution of flood events by flood height.
***note that flood events are not of equal duration (see 8 below)***

| State | Number of flood events |
| ----- | ---------------------- |
| 1     | 392                    |
| 2     | 591                    |
| 3     | 213                    |
| 72    | 4                      |

```sql
SELECT count(id), state FROM rem_status_log WHERE username != 'DIMS' AND state > 0 GROUP BY state ORDER BY state;
```

#### 8. Event duration

#### 9. Event data
GeoJSON generated using `pier get-floodstate`

Files represent RW districts which experienced flooding within the specified 24 hour period. Flood height data is downsampled to hourly frequency, thus each RW district includes 24 flood state attributes. RW districts not affected within the 24 hour period are not included.

* `cognicity-rem-floodstate-2016-02-25.geojson` (empty)
* `cognicity-rem-floodstate-2016-02-26.geojson`
* `cognicity-rem-floodstate-2016-02-27.geojson` (empty)
* `cognicity-rem-floodstate-2016-02-28.geojson`
* `cognicity-rem-floodstate-2016-04-02.geojson`
* `cognicity-rem-floodstate-2016-04-21.geojson`
